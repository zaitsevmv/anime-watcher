2025-04-04 00:40:40,518 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:40,519 - DEBUG - API response: None
2025-04-04 00:40:42,851 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:42,866 - DEBUG - API response: None
2025-04-04 00:40:44,201 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:44,203 - DEBUG - API response: None
2025-04-04 00:40:44,570 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:44,572 - DEBUG - API response: None
2025-04-04 00:40:45,498 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:45,504 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 46, in index
    return render_template('index.html', anime_list=anime_list)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/anime-watcher/frontend/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/anime-watcher/frontend/templates/base.html", line 26, in top-level template code
    {% block content %}{% endblock %}
  File "/home/anime-watcher/frontend/templates/index.html", line 11, in block 'content'
    const animeIds = JSON.parse('{{ anime_ids | tojson | safe }}');
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/json/provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "/usr/lib/python3.10/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "/usr/lib/python3.10/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.10/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/json/provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-04-04 00:40:46,582 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:46,583 - DEBUG - API response: None
2025-04-04 00:40:46,772 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:46,774 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 46, in index
    return render_template('index.html', anime_list=anime_list)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/anime-watcher/frontend/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/anime-watcher/frontend/templates/base.html", line 26, in top-level template code
    {% block content %}{% endblock %}
  File "/home/anime-watcher/frontend/templates/index.html", line 11, in block 'content'
    const animeIds = JSON.parse('{{ anime_ids | tojson | safe }}');
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/jinja2/utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/json/provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "/usr/lib/python3.10/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "/usr/lib/python3.10/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.10/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/json/provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-04-04 00:40:48,579 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:48,583 - DEBUG - API response: None
2025-04-04 00:40:50,578 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:50,579 - DEBUG - API response: None
2025-04-04 00:40:52,627 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:52,628 - DEBUG - API response: None
2025-04-04 00:40:54,648 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:54,649 - DEBUG - API response: None
2025-04-04 00:40:56,705 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:56,718 - DEBUG - API response: None
2025-04-04 00:40:58,747 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:40:58,770 - DEBUG - API response: None
2025-04-04 00:41:00,802 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:00,803 - DEBUG - API response: None
2025-04-04 00:41:02,833 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:02,834 - DEBUG - API response: None
2025-04-04 00:41:04,862 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:04,864 - DEBUG - API response: None
2025-04-04 00:41:06,892 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:06,894 - DEBUG - API response: None
2025-04-04 00:41:08,916 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:08,919 - DEBUG - API response: None
2025-04-04 00:41:10,939 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:10,940 - DEBUG - API response: None
2025-04-04 00:41:12,974 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:12,975 - DEBUG - API response: None
2025-04-04 00:41:15,023 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:15,024 - DEBUG - API response: None
2025-04-04 00:41:17,063 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:17,064 - DEBUG - API response: None
2025-04-04 00:41:19,119 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:19,120 - DEBUG - API response: None
2025-04-04 00:41:21,162 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:21,163 - DEBUG - API response: None
2025-04-04 00:41:23,139 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:23,140 - DEBUG - API response: None
2025-04-04 00:41:25,142 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:25,145 - DEBUG - API response: None
2025-04-04 00:41:27,166 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:27,168 - DEBUG - API response: None
2025-04-04 00:41:29,204 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:29,205 - DEBUG - API response: None
2025-04-04 00:41:31,224 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:31,226 - DEBUG - API response: None
2025-04-04 00:41:33,247 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:33,255 - DEBUG - API response: None
2025-04-04 00:41:35,498 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:35,499 - DEBUG - API response: None
2025-04-04 00:41:37,551 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:37,553 - DEBUG - API response: None
2025-04-04 00:41:39,596 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:39,598 - DEBUG - API response: None
2025-04-04 00:41:41,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:41,644 - DEBUG - API response: None
2025-04-04 00:41:43,696 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:43,697 - DEBUG - API response: None
2025-04-04 00:41:45,768 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:45,798 - DEBUG - API response: None
2025-04-04 00:41:47,744 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:47,746 - DEBUG - API response: None
2025-04-04 00:41:49,796 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:49,797 - DEBUG - API response: None
2025-04-04 00:41:51,868 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:51,869 - DEBUG - API response: None
2025-04-04 00:41:53,931 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:53,933 - DEBUG - API response: None
2025-04-04 00:41:55,988 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:55,995 - DEBUG - API response: None
2025-04-04 00:41:58,023 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:41:58,025 - DEBUG - API response: None
2025-04-04 00:42:00,073 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:00,074 - DEBUG - API response: None
2025-04-04 00:42:01,426 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:02,154 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:02,158 - DEBUG - API response: None
2025-04-04 00:42:04,179 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:04,181 - DEBUG - API response: None
2025-04-04 00:42:06,221 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:06,235 - DEBUG - API response: None
2025-04-04 00:42:08,267 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:08,270 - DEBUG - API response: None
2025-04-04 00:42:10,261 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:10,263 - DEBUG - API response: None
2025-04-04 00:42:12,109 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:12,323 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:12,324 - DEBUG - API response: None
2025-04-04 00:42:14,351 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:14,353 - DEBUG - API response: None
2025-04-04 00:42:16,420 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:16,421 - DEBUG - API response: None
2025-04-04 00:42:18,441 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:18,442 - DEBUG - API response: None
2025-04-04 00:42:20,463 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:20,465 - DEBUG - API response: None
2025-04-04 00:42:22,467 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:22,468 - DEBUG - API response: None
2025-04-04 00:42:24,489 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:24,490 - DEBUG - API response: None
2025-04-04 00:42:26,511 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:26,512 - DEBUG - API response: None
2025-04-04 00:42:28,532 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:28,543 - DEBUG - API response: None
2025-04-04 00:42:30,546 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:30,550 - DEBUG - API response: None
2025-04-04 00:42:32,556 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:32,559 - DEBUG - API response: None
2025-04-04 00:42:34,624 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:34,625 - DEBUG - API response: None
2025-04-04 00:42:36,650 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:36,652 - DEBUG - API response: None
2025-04-04 00:42:38,672 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:38,675 - DEBUG - API response: None
2025-04-04 00:42:40,909 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:40,911 - DEBUG - API response: None
2025-04-04 00:42:42,932 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:42,934 - DEBUG - API response: None
2025-04-04 00:42:44,954 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:44,955 - DEBUG - API response: None
2025-04-04 00:42:46,974 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:46,983 - DEBUG - API response: None
2025-04-04 00:42:48,991 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:48,992 - DEBUG - API response: None
2025-04-04 00:42:51,011 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:51,012 - DEBUG - API response: None
2025-04-04 00:42:53,030 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:53,033 - DEBUG - API response: None
2025-04-04 00:42:55,054 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:55,055 - DEBUG - API response: None
2025-04-04 00:42:57,072 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:57,074 - DEBUG - API response: None
2025-04-04 00:42:59,095 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:42:59,109 - DEBUG - API response: None
2025-04-04 00:43:01,130 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:01,132 - DEBUG - API response: None
2025-04-04 00:43:03,153 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:03,154 - DEBUG - API response: None
2025-04-04 00:43:05,176 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:05,183 - DEBUG - API response: None
2025-04-04 00:43:07,203 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:07,208 - DEBUG - API response: None
2025-04-04 00:43:09,227 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:09,240 - DEBUG - API response: None
2025-04-04 00:43:11,264 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:11,269 - DEBUG - API response: None
2025-04-04 00:43:13,293 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:13,294 - DEBUG - API response: None
2025-04-04 00:43:15,321 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:15,323 - DEBUG - API response: None
2025-04-04 00:43:17,349 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:17,353 - DEBUG - API response: None
2025-04-04 00:43:19,377 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:19,379 - DEBUG - API response: None
2025-04-04 00:43:21,404 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:21,407 - DEBUG - API response: None
2025-04-04 00:43:23,442 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:23,443 - DEBUG - API response: None
2025-04-04 00:43:25,464 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:25,466 - DEBUG - API response: None
2025-04-04 00:43:27,656 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:27,660 - DEBUG - API response: None
2025-04-04 00:43:29,704 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:29,705 - DEBUG - API response: None
2025-04-04 00:43:31,727 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:31,728 - DEBUG - API response: None
2025-04-04 00:43:33,747 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:33,753 - DEBUG - API response: None
2025-04-04 00:43:35,780 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:35,781 - DEBUG - API response: None
2025-04-04 00:43:37,806 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:37,811 - DEBUG - API response: None
2025-04-04 00:43:39,839 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:39,842 - DEBUG - API response: None
2025-04-04 00:43:41,876 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:41,878 - DEBUG - API response: None
2025-04-04 00:43:43,906 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:43,918 - DEBUG - API response: None
2025-04-04 00:43:45,937 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:45,939 - DEBUG - API response: None
2025-04-04 00:43:47,959 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:47,960 - DEBUG - API response: None
2025-04-04 00:43:49,989 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:49,990 - DEBUG - API response: None
2025-04-04 00:43:52,010 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:52,013 - DEBUG - API response: None
2025-04-04 00:43:54,044 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:54,045 - DEBUG - API response: None
2025-04-04 00:43:56,091 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:56,092 - DEBUG - API response: None
2025-04-04 00:43:58,141 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:43:58,146 - DEBUG - API response: None
2025-04-04 00:44:00,214 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:00,215 - DEBUG - API response: None
2025-04-04 00:44:02,237 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:02,239 - DEBUG - API response: None
2025-04-04 00:44:04,239 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:04,240 - DEBUG - API response: None
2025-04-04 00:44:06,339 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:06,341 - DEBUG - API response: None
2025-04-04 00:44:08,384 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:08,385 - DEBUG - API response: None
2025-04-04 00:44:10,363 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:10,364 - DEBUG - API response: None
2025-04-04 00:44:12,389 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:12,390 - DEBUG - API response: None
2025-04-04 00:44:14,418 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:14,429 - DEBUG - API response: None
2025-04-04 00:44:16,466 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:16,470 - DEBUG - API response: None
2025-04-04 00:44:18,503 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:18,504 - DEBUG - API response: None
2025-04-04 00:44:20,529 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:20,536 - DEBUG - API response: None
2025-04-04 00:44:22,529 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:22,530 - DEBUG - API response: None
2025-04-04 00:44:24,581 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:24,594 - DEBUG - API response: None
2025-04-04 00:44:26,619 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:26,624 - DEBUG - API response: None
2025-04-04 00:44:28,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:28,649 - DEBUG - API response: None
2025-04-04 00:44:30,675 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:30,678 - DEBUG - API response: None
2025-04-04 00:44:32,705 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:32,712 - DEBUG - API response: None
2025-04-04 00:44:34,802 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:34,807 - DEBUG - API response: None
2025-04-04 00:44:36,830 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:36,831 - DEBUG - API response: None
2025-04-04 00:44:38,865 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:38,866 - DEBUG - API response: None
2025-04-04 00:44:40,887 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:40,888 - DEBUG - API response: None
2025-04-04 00:44:42,915 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:42,916 - DEBUG - API response: None
2025-04-04 00:44:44,941 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:44,943 - DEBUG - API response: None
2025-04-04 00:44:46,969 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:46,971 - DEBUG - API response: None
2025-04-04 00:44:49,027 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:49,028 - DEBUG - API response: None
2025-04-04 00:44:51,013 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:51,015 - DEBUG - API response: None
2025-04-04 00:44:53,034 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:53,035 - DEBUG - API response: None
2025-04-04 00:44:55,036 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:55,037 - DEBUG - API response: None
2025-04-04 00:44:57,112 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:57,114 - DEBUG - API response: None
2025-04-04 00:44:59,140 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:44:59,142 - DEBUG - API response: None
2025-04-04 00:45:01,358 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:01,359 - DEBUG - API response: None
2025-04-04 00:45:03,380 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:03,381 - DEBUG - API response: None
2025-04-04 00:45:05,400 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:05,402 - DEBUG - API response: None
2025-04-04 00:45:07,422 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:07,423 - DEBUG - API response: None
2025-04-04 00:45:09,443 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:09,443 - DEBUG - API response: None
2025-04-04 00:45:11,481 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:11,482 - DEBUG - API response: None
2025-04-04 00:45:13,502 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:13,504 - DEBUG - API response: None
2025-04-04 00:45:15,524 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:15,525 - DEBUG - API response: None
2025-04-04 00:45:17,547 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:17,551 - DEBUG - API response: None
2025-04-04 00:45:19,583 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:19,596 - DEBUG - API response: None
2025-04-04 00:45:21,618 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:21,620 - DEBUG - API response: None
2025-04-04 00:45:23,647 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:23,649 - DEBUG - API response: None
2025-04-04 00:45:25,672 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:25,689 - DEBUG - API response: None
2025-04-04 00:45:27,713 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:27,716 - DEBUG - API response: None
2025-04-04 00:45:29,736 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:29,739 - DEBUG - API response: None
2025-04-04 00:45:31,761 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:31,766 - DEBUG - API response: None
2025-04-04 00:45:34,003 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:34,005 - DEBUG - API response: None
2025-04-04 00:45:36,036 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:36,038 - DEBUG - API response: None
2025-04-04 00:45:38,083 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:38,085 - DEBUG - API response: None
2025-04-04 00:45:40,146 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:40,147 - DEBUG - API response: None
2025-04-04 00:45:42,182 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:42,183 - DEBUG - API response: None
2025-04-04 00:45:44,231 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:44,233 - DEBUG - API response: None
2025-04-04 00:45:46,275 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:46,276 - DEBUG - API response: None
2025-04-04 00:45:48,322 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:48,323 - DEBUG - API response: None
2025-04-04 00:45:50,376 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:50,378 - DEBUG - API response: None
2025-04-04 00:45:52,362 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:52,371 - DEBUG - API response: None
2025-04-04 00:45:54,445 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:54,455 - DEBUG - API response: None
2025-04-04 00:45:56,494 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:56,507 - DEBUG - API response: None
2025-04-04 00:45:58,530 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:45:58,531 - DEBUG - API response: None
2025-04-04 00:46:00,575 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:00,576 - DEBUG - API response: None
2025-04-04 00:46:02,662 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:02,663 - DEBUG - API response: None
2025-04-04 00:46:04,722 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:04,727 - DEBUG - API response: None
2025-04-04 00:46:06,747 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:06,753 - DEBUG - API response: None
2025-04-04 00:46:08,771 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:08,772 - DEBUG - API response: None
2025-04-04 00:46:10,790 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:10,791 - DEBUG - API response: None
2025-04-04 00:46:12,844 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:12,845 - DEBUG - API response: None
2025-04-04 00:46:14,869 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:14,873 - DEBUG - API response: None
2025-04-04 00:46:16,914 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:16,916 - DEBUG - API response: None
2025-04-04 00:46:18,937 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:18,938 - DEBUG - API response: None
2025-04-04 00:46:20,962 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:20,963 - DEBUG - API response: None
2025-04-04 00:46:23,002 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:23,003 - DEBUG - API response: None
2025-04-04 00:46:25,016 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:25,017 - DEBUG - API response: None
2025-04-04 00:46:27,040 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:27,041 - DEBUG - API response: None
2025-04-04 00:46:29,064 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:29,067 - DEBUG - API response: None
2025-04-04 00:46:31,114 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:31,116 - DEBUG - API response: None
2025-04-04 00:46:33,138 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:33,139 - DEBUG - API response: None
2025-04-04 00:46:35,161 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:35,166 - DEBUG - API response: None
2025-04-04 00:46:37,189 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:37,190 - DEBUG - API response: None
2025-04-04 00:46:39,213 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:39,219 - DEBUG - API response: None
2025-04-04 00:46:41,242 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:41,243 - DEBUG - API response: None
2025-04-04 00:46:43,264 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:43,265 - DEBUG - API response: None
2025-04-04 00:46:45,285 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:45,287 - DEBUG - API response: None
2025-04-04 00:46:47,338 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:47,339 - DEBUG - API response: None
2025-04-04 00:46:49,360 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:49,361 - DEBUG - API response: None
2025-04-04 00:46:51,380 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:51,381 - DEBUG - API response: None
2025-04-04 00:46:53,418 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:53,422 - DEBUG - API response: None
2025-04-04 00:46:55,462 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:55,467 - DEBUG - API response: None
2025-04-04 00:46:57,488 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:57,489 - DEBUG - API response: None
2025-04-04 00:46:59,509 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:46:59,512 - DEBUG - API response: None
2025-04-04 00:47:01,537 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:01,539 - DEBUG - API response: None
2025-04-04 00:47:03,560 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:03,562 - DEBUG - API response: None
2025-04-04 00:47:05,584 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:05,591 - DEBUG - API response: None
2025-04-04 00:47:07,588 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:07,590 - DEBUG - API response: None
2025-04-04 00:47:09,608 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:09,615 - DEBUG - API response: None
2025-04-04 00:47:11,637 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:11,640 - DEBUG - API response: None
2025-04-04 00:47:13,663 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:13,680 - DEBUG - API response: None
2025-04-04 00:47:15,701 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:15,702 - DEBUG - API response: None
2025-04-04 00:47:17,720 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:17,722 - DEBUG - API response: None
2025-04-04 00:47:19,742 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:19,744 - DEBUG - API response: None
2025-04-04 00:47:21,784 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:21,785 - DEBUG - API response: None
2025-04-04 00:47:23,813 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:23,827 - DEBUG - API response: None
2025-04-04 00:47:25,862 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:25,864 - DEBUG - API response: None
2025-04-04 00:47:27,915 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:27,917 - DEBUG - API response: None
2025-04-04 00:47:28,059 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:29,956 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:29,970 - DEBUG - API response: None
2025-04-04 00:47:32,021 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:32,026 - DEBUG - API response: None
2025-04-04 00:47:34,053 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:34,062 - DEBUG - API response: None
2025-04-04 00:47:36,084 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:36,093 - DEBUG - API response: None
2025-04-04 00:47:38,114 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:38,122 - DEBUG - API response: None
2025-04-04 00:47:40,144 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:40,151 - DEBUG - API response: None
2025-04-04 00:47:42,172 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:42,175 - DEBUG - API response: None
2025-04-04 00:47:44,196 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:44,209 - DEBUG - API response: None
2025-04-04 00:47:46,231 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:46,259 - DEBUG - API response: None
2025-04-04 00:47:48,279 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:48,280 - DEBUG - API response: None
2025-04-04 00:47:50,301 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:50,304 - DEBUG - API response: None
2025-04-04 00:47:52,335 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:52,337 - DEBUG - API response: None
2025-04-04 00:47:54,357 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:54,370 - DEBUG - API response: None
2025-04-04 00:47:56,347 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:56,349 - DEBUG - API response: None
2025-04-04 00:47:58,373 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:47:58,375 - DEBUG - API response: None
2025-04-04 00:48:00,401 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:00,409 - DEBUG - API response: None
2025-04-04 00:48:02,438 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:02,439 - DEBUG - API response: None
2025-04-04 00:48:04,460 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:04,461 - DEBUG - API response: None
2025-04-04 00:48:06,481 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:06,483 - DEBUG - API response: None
2025-04-04 00:48:08,505 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:08,515 - DEBUG - API response: None
2025-04-04 00:48:10,534 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:10,535 - DEBUG - API response: None
2025-04-04 00:48:12,567 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:12,568 - DEBUG - API response: None
2025-04-04 00:48:14,593 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:14,595 - DEBUG - API response: None
2025-04-04 00:48:16,616 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:16,618 - DEBUG - API response: None
2025-04-04 00:48:18,651 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:18,652 - DEBUG - API response: None
2025-04-04 00:48:20,674 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:20,675 - DEBUG - API response: None
2025-04-04 00:48:22,698 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:22,701 - DEBUG - API response: None
2025-04-04 00:48:24,725 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:24,726 - DEBUG - API response: None
2025-04-04 00:48:26,753 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:26,754 - DEBUG - API response: None
2025-04-04 00:48:28,777 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:28,785 - DEBUG - API response: None
2025-04-04 00:48:30,812 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:30,813 - DEBUG - API response: None
2025-04-04 00:48:32,833 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:32,835 - DEBUG - API response: None
2025-04-04 00:48:34,865 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:34,866 - DEBUG - API response: None
2025-04-04 00:48:36,895 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:36,911 - DEBUG - API response: None
2025-04-04 00:48:39,032 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:39,045 - DEBUG - API response: None
2025-04-04 00:48:41,078 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:41,082 - DEBUG - API response: None
2025-04-04 00:48:43,103 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:43,105 - DEBUG - API response: None
2025-04-04 00:48:45,126 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:45,128 - DEBUG - API response: None
2025-04-04 00:48:47,150 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:47,156 - DEBUG - API response: None
2025-04-04 00:48:49,177 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:49,178 - DEBUG - API response: None
2025-04-04 00:48:51,200 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:51,202 - DEBUG - API response: None
2025-04-04 00:48:53,223 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:53,226 - DEBUG - API response: None
2025-04-04 00:48:55,223 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:55,225 - DEBUG - API response: None
2025-04-04 00:48:57,249 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:57,250 - DEBUG - API response: None
2025-04-04 00:48:59,248 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:48:59,250 - DEBUG - API response: None
2025-04-04 00:49:01,281 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:01,282 - DEBUG - API response: None
2025-04-04 00:49:03,351 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:03,356 - DEBUG - API response: None
2025-04-04 00:49:05,382 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:05,390 - DEBUG - API response: None
2025-04-04 00:49:07,410 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:07,411 - DEBUG - API response: None
2025-04-04 00:49:09,453 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:09,461 - DEBUG - API response: None
2025-04-04 00:49:11,486 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:11,489 - DEBUG - API response: None
2025-04-04 00:49:13,510 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:13,511 - DEBUG - API response: None
2025-04-04 00:49:15,548 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:15,559 - DEBUG - API response: None
2025-04-04 00:49:17,579 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:17,580 - DEBUG - API response: None
2025-04-04 00:49:19,601 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:19,602 - DEBUG - API response: None
2025-04-04 00:49:21,622 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:21,623 - DEBUG - API response: None
2025-04-04 00:49:23,644 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:23,655 - DEBUG - API response: None
2025-04-04 00:49:25,676 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:25,677 - DEBUG - API response: None
2025-04-04 00:49:27,697 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:27,701 - DEBUG - API response: None
2025-04-04 00:49:29,737 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:29,739 - DEBUG - API response: None
2025-04-04 00:49:31,772 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:31,773 - DEBUG - API response: None
2025-04-04 00:49:33,794 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:33,796 - DEBUG - API response: None
2025-04-04 00:49:35,802 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:35,803 - DEBUG - API response: None
2025-04-04 00:49:37,824 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:37,826 - DEBUG - API response: None
2025-04-04 00:49:39,848 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:39,849 - DEBUG - API response: None
2025-04-04 00:49:41,872 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:41,874 - DEBUG - API response: None
2025-04-04 00:49:43,897 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:43,901 - DEBUG - API response: None
2025-04-04 00:49:45,920 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:45,922 - DEBUG - API response: None
2025-04-04 00:49:47,920 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:47,922 - DEBUG - API response: None
2025-04-04 00:49:49,940 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:49,943 - DEBUG - API response: None
2025-04-04 00:49:51,965 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:51,967 - DEBUG - API response: None
2025-04-04 00:49:53,988 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:53,989 - DEBUG - API response: None
2025-04-04 00:49:56,009 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:56,015 - DEBUG - API response: None
2025-04-04 00:49:58,039 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:49:58,041 - DEBUG - API response: None
2025-04-04 00:50:00,111 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:00,112 - DEBUG - API response: None
2025-04-04 00:50:02,152 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:02,153 - DEBUG - API response: None
2025-04-04 00:50:04,177 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:04,181 - DEBUG - API response: None
2025-04-04 00:50:06,236 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:06,238 - DEBUG - API response: None
2025-04-04 00:50:08,309 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:08,312 - DEBUG - API response: None
2025-04-04 00:50:10,354 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:10,357 - DEBUG - API response: None
2025-04-04 00:50:12,381 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:12,384 - DEBUG - API response: None
2025-04-04 00:50:14,407 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:14,409 - DEBUG - API response: None
2025-04-04 00:50:16,435 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:16,436 - DEBUG - API response: None
2025-04-04 00:50:18,456 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:18,457 - DEBUG - API response: None
2025-04-04 00:50:20,481 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:20,488 - DEBUG - API response: None
2025-04-04 00:50:22,518 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:22,519 - DEBUG - API response: None
2025-04-04 00:50:24,540 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:24,542 - DEBUG - API response: None
2025-04-04 00:50:26,569 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:26,573 - DEBUG - API response: None
2025-04-04 00:50:28,595 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:28,598 - DEBUG - API response: None
2025-04-04 00:50:30,619 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:30,620 - DEBUG - API response: None
2025-04-04 00:50:32,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:32,645 - DEBUG - API response: None
2025-04-04 00:50:34,688 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:34,715 - DEBUG - API response: None
2025-04-04 00:50:36,737 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:36,739 - DEBUG - API response: None
2025-04-04 00:50:38,770 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:38,777 - DEBUG - API response: None
2025-04-04 00:50:40,798 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:40,799 - DEBUG - API response: None
2025-04-04 00:50:42,818 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:42,819 - DEBUG - API response: None
2025-04-04 00:50:44,852 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:44,858 - DEBUG - API response: None
2025-04-04 00:50:46,891 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:46,895 - DEBUG - API response: None
2025-04-04 00:50:48,932 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:48,933 - DEBUG - API response: None
2025-04-04 00:50:50,965 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:50,967 - DEBUG - API response: None
2025-04-04 00:50:52,998 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:52,999 - DEBUG - API response: None
2025-04-04 00:50:55,030 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:55,031 - DEBUG - API response: None
2025-04-04 00:50:57,058 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:57,067 - DEBUG - API response: None
2025-04-04 00:50:59,088 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:50:59,090 - DEBUG - API response: None
2025-04-04 00:51:01,116 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:01,117 - DEBUG - API response: None
2025-04-04 00:51:03,140 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:03,142 - DEBUG - API response: None
2025-04-04 00:51:05,273 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:05,276 - DEBUG - API response: None
2025-04-04 00:51:07,299 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:07,303 - DEBUG - API response: None
2025-04-04 00:51:09,325 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:09,326 - DEBUG - API response: None
2025-04-04 00:51:11,348 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:11,350 - DEBUG - API response: None
2025-04-04 00:51:13,367 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:13,374 - DEBUG - API response: None
2025-04-04 00:51:15,399 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:15,400 - DEBUG - API response: None
2025-04-04 00:51:17,421 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:17,423 - DEBUG - API response: None
2025-04-04 00:51:19,486 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:19,487 - DEBUG - API response: None
2025-04-04 00:51:21,509 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:21,534 - DEBUG - API response: None
2025-04-04 00:51:23,555 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:23,559 - DEBUG - API response: None
2025-04-04 00:51:25,582 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:25,587 - DEBUG - API response: None
2025-04-04 00:51:27,607 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:27,615 - DEBUG - API response: None
2025-04-04 00:51:29,640 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:29,643 - DEBUG - API response: None
2025-04-04 00:51:31,663 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:31,664 - DEBUG - API response: None
2025-04-04 00:51:33,688 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:33,689 - DEBUG - API response: None
2025-04-04 00:51:35,711 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:35,712 - DEBUG - API response: None
2025-04-04 00:51:37,732 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:37,733 - DEBUG - API response: None
2025-04-04 00:51:39,768 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:39,770 - DEBUG - API response: None
2025-04-04 00:51:41,798 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:41,799 - DEBUG - API response: None
2025-04-04 00:51:43,820 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:43,821 - DEBUG - API response: None
2025-04-04 00:51:45,842 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:45,844 - DEBUG - API response: None
2025-04-04 00:51:47,870 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:47,879 - DEBUG - API response: None
2025-04-04 00:51:49,900 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:49,902 - DEBUG - API response: None
2025-04-04 00:51:51,959 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:51,970 - DEBUG - API response: None
2025-04-04 00:51:54,008 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:54,027 - DEBUG - API response: None
2025-04-04 00:51:56,050 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:56,051 - DEBUG - API response: None
2025-04-04 00:51:58,051 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:51:58,059 - DEBUG - API response: None
2025-04-04 00:52:00,103 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:00,105 - DEBUG - API response: None
2025-04-04 00:52:02,186 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:02,187 - DEBUG - API response: None
2025-04-04 00:52:04,207 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:04,208 - DEBUG - API response: None
2025-04-04 00:52:06,232 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:06,251 - DEBUG - API response: None
2025-04-04 00:52:08,273 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:08,274 - DEBUG - API response: None
2025-04-04 00:52:10,298 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:10,299 - DEBUG - API response: None
2025-04-04 00:52:12,318 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:12,319 - DEBUG - API response: None
2025-04-04 00:52:14,342 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:14,346 - DEBUG - API response: None
2025-04-04 00:52:16,367 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:16,369 - DEBUG - API response: None
2025-04-04 00:52:18,392 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:18,393 - DEBUG - API response: None
2025-04-04 00:52:20,420 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:20,421 - DEBUG - API response: None
2025-04-04 00:52:22,423 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:22,425 - DEBUG - API response: None
2025-04-04 00:52:24,445 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:24,446 - DEBUG - API response: None
2025-04-04 00:52:26,469 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:26,479 - DEBUG - API response: None
2025-04-04 00:52:28,497 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:28,502 - DEBUG - API response: None
2025-04-04 00:52:30,523 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:30,524 - DEBUG - API response: None
2025-04-04 00:52:32,542 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:32,544 - DEBUG - API response: None
2025-04-04 00:52:34,567 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:34,568 - DEBUG - API response: None
2025-04-04 00:52:36,590 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:36,596 - DEBUG - API response: None
2025-04-04 00:52:38,624 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:38,625 - DEBUG - API response: None
2025-04-04 00:52:40,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:40,645 - DEBUG - API response: None
2025-04-04 00:52:42,666 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:42,672 - DEBUG - API response: None
2025-04-04 00:52:44,691 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:44,696 - DEBUG - API response: None
2025-04-04 00:52:46,727 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:46,746 - DEBUG - API response: None
2025-04-04 00:52:48,802 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:48,803 - DEBUG - API response: None
2025-04-04 00:52:50,828 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:50,834 - DEBUG - API response: None
2025-04-04 00:52:52,861 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:52,863 - DEBUG - API response: None
2025-04-04 00:52:54,884 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:54,885 - DEBUG - API response: None
2025-04-04 00:52:56,922 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:56,934 - DEBUG - API response: None
2025-04-04 00:52:58,932 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:52:58,934 - DEBUG - API response: None
2025-04-04 00:53:00,952 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:00,953 - DEBUG - API response: None
2025-04-04 00:53:02,974 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:02,980 - DEBUG - API response: None
2025-04-04 00:53:05,010 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:05,020 - DEBUG - API response: None
2025-04-04 00:53:07,040 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:07,041 - DEBUG - API response: None
2025-04-04 00:53:09,062 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:09,070 - DEBUG - API response: None
2025-04-04 00:53:11,088 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:11,093 - DEBUG - API response: None
2025-04-04 00:53:13,121 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:13,122 - DEBUG - API response: None
2025-04-04 00:53:15,146 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:15,148 - DEBUG - API response: None
2025-04-04 00:53:17,170 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:17,171 - DEBUG - API response: None
2025-04-04 00:53:19,208 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:19,210 - DEBUG - API response: None
2025-04-04 00:53:21,241 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:21,243 - DEBUG - API response: None
2025-04-04 00:53:23,288 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:23,290 - DEBUG - API response: None
2025-04-04 00:53:25,348 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:25,351 - DEBUG - API response: None
2025-04-04 00:53:27,396 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:27,397 - DEBUG - API response: None
2025-04-04 00:53:29,436 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:29,437 - DEBUG - API response: None
2025-04-04 00:53:31,483 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:31,485 - DEBUG - API response: None
2025-04-04 00:53:33,537 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:33,539 - DEBUG - API response: None
2025-04-04 00:53:35,576 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:35,579 - DEBUG - API response: None
2025-04-04 00:53:37,630 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:37,632 - DEBUG - API response: None
2025-04-04 00:53:39,677 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:39,690 - DEBUG - API response: None
2025-04-04 00:53:41,707 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:41,709 - DEBUG - API response: None
2025-04-04 00:53:43,778 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:43,784 - DEBUG - API response: None
2025-04-04 00:53:45,818 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:45,824 - DEBUG - API response: None
2025-04-04 00:53:48,086 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:48,106 - DEBUG - API response: None
2025-04-04 00:53:49,850 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:49,851 - DEBUG - API response: None
2025-04-04 00:53:51,861 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:51,862 - DEBUG - API response: None
2025-04-04 00:53:53,886 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:53,891 - DEBUG - API response: None
2025-04-04 00:53:55,916 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:55,923 - DEBUG - API response: None
2025-04-04 00:53:57,963 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:57,964 - DEBUG - API response: None
2025-04-04 00:53:59,963 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:53:59,969 - DEBUG - API response: None
2025-04-04 00:54:01,996 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:02,000 - DEBUG - API response: None
2025-04-04 00:54:04,024 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:04,025 - DEBUG - API response: None
2025-04-04 00:54:06,046 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:06,047 - DEBUG - API response: None
2025-04-04 00:54:08,049 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:08,059 - DEBUG - API response: None
2025-04-04 00:54:10,094 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:10,095 - DEBUG - API response: None
2025-04-04 00:54:12,115 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:12,117 - DEBUG - API response: None
2025-04-04 00:54:14,137 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:14,139 - DEBUG - API response: None
2025-04-04 00:54:16,159 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:16,160 - DEBUG - API response: None
2025-04-04 00:54:18,184 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:18,187 - DEBUG - API response: None
2025-04-04 00:54:20,206 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:20,207 - DEBUG - API response: None
2025-04-04 00:54:22,233 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:22,234 - DEBUG - API response: None
2025-04-04 00:54:24,259 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:24,262 - DEBUG - API response: None
2025-04-04 00:54:26,283 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:26,285 - DEBUG - API response: None
2025-04-04 00:54:28,330 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:28,331 - DEBUG - API response: None
2025-04-04 00:54:30,349 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:30,362 - DEBUG - API response: None
2025-04-04 00:54:32,388 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:32,389 - DEBUG - API response: None
2025-04-04 00:54:34,414 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:34,450 - DEBUG - API response: None
2025-04-04 00:54:36,485 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:36,490 - DEBUG - API response: None
2025-04-04 00:54:38,511 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:38,512 - DEBUG - API response: None
2025-04-04 00:54:40,529 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:40,530 - DEBUG - API response: None
2025-04-04 00:54:42,565 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:42,572 - DEBUG - API response: None
2025-04-04 00:54:44,631 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:44,637 - DEBUG - API response: None
2025-04-04 00:54:46,690 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:46,694 - DEBUG - API response: None
2025-04-04 00:54:48,718 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:48,722 - DEBUG - API response: None
2025-04-04 00:54:50,747 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:50,764 - DEBUG - API response: None
2025-04-04 00:54:52,786 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:52,791 - DEBUG - API response: None
2025-04-04 00:54:54,822 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:54,824 - DEBUG - API response: None
2025-04-04 00:54:56,854 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:56,855 - DEBUG - API response: None
2025-04-04 00:54:58,878 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:54:58,880 - DEBUG - API response: None
2025-04-04 00:55:00,902 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:00,906 - DEBUG - API response: None
2025-04-04 00:55:03,012 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:03,013 - DEBUG - API response: None
2025-04-04 00:55:05,066 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:05,092 - DEBUG - API response: None
2025-04-04 00:55:07,129 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:07,131 - DEBUG - API response: None
2025-04-04 00:55:09,183 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:09,185 - DEBUG - API response: None
2025-04-04 00:55:11,213 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:11,221 - DEBUG - API response: None
2025-04-04 00:55:13,261 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:13,263 - DEBUG - API response: None
2025-04-04 00:55:15,293 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:15,302 - DEBUG - API response: None
2025-04-04 00:55:17,340 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:17,345 - DEBUG - API response: None
2025-04-04 00:55:19,373 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:19,380 - DEBUG - API response: None
2025-04-04 00:55:21,402 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:21,403 - DEBUG - API response: None
2025-04-04 00:55:23,429 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:23,430 - DEBUG - API response: None
2025-04-04 00:55:25,464 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:25,465 - DEBUG - API response: None
2025-04-04 00:55:27,488 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:27,509 - DEBUG - API response: None
2025-04-04 00:55:29,537 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:29,539 - DEBUG - API response: None
2025-04-04 00:55:31,565 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:31,566 - DEBUG - API response: None
2025-04-04 00:55:32,411 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:33,618 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:33,619 - DEBUG - API response: None
2025-04-04 00:55:33,768 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:35,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:35,646 - DEBUG - API response: None
2025-04-04 00:55:37,685 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:37,687 - DEBUG - API response: None
2025-04-04 00:55:39,709 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:39,710 - DEBUG - API response: None
2025-04-04 00:55:41,735 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:41,736 - DEBUG - API response: None
2025-04-04 00:55:43,760 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:43,761 - DEBUG - API response: None
2025-04-04 00:55:45,783 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:45,784 - DEBUG - API response: None
2025-04-04 00:55:47,814 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:47,816 - DEBUG - API response: None
2025-04-04 00:55:49,978 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:49,980 - DEBUG - API response: None
2025-04-04 00:55:52,002 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:52,003 - DEBUG - API response: None
2025-04-04 00:55:53,280 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:54,049 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:54,050 - DEBUG - API response: None
2025-04-04 00:55:56,088 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:56,089 - DEBUG - API response: None
2025-04-04 00:55:58,132 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:55:58,147 - DEBUG - API response: None
2025-04-04 00:56:00,207 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:00,208 - DEBUG - API response: None
2025-04-04 00:56:02,187 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:02,189 - DEBUG - API response: None
2025-04-04 00:56:04,213 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:04,214 - DEBUG - API response: None
2025-04-04 00:56:06,239 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:06,246 - DEBUG - API response: None
2025-04-04 00:56:08,270 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:08,272 - DEBUG - API response: None
2025-04-04 00:56:10,300 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:10,302 - DEBUG - API response: None
2025-04-04 00:56:12,328 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:12,333 - DEBUG - API response: None
2025-04-04 00:56:14,358 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:14,362 - DEBUG - API response: None
2025-04-04 00:56:16,380 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:16,385 - DEBUG - API response: None
2025-04-04 00:56:18,408 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:18,409 - DEBUG - API response: None
2025-04-04 00:56:20,434 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:20,435 - DEBUG - API response: None
2025-04-04 00:56:22,452 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:22,453 - DEBUG - API response: None
2025-04-04 00:56:24,474 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:24,478 - DEBUG - API response: None
2025-04-04 00:56:26,498 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:26,499 - DEBUG - API response: None
2025-04-04 00:56:28,531 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:28,532 - DEBUG - API response: None
2025-04-04 00:56:30,588 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:30,590 - DEBUG - API response: None
2025-04-04 00:56:32,632 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 00:56:32,633 - DEBUG - API response: None
2025-04-04 10:34:35,091 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:37,020 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:37,044 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:37,046 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:37,047 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:38,951 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:38,959 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:38,960 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:38,960 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:41,148 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:41,154 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:41,155 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:41,155 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:42,707 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:42,711 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:42,712 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:42,712 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:44,305 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:44,318 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:44,319 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:44,320 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:46,280 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:46,286 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:46,287 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:46,288 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:48,290 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:48,295 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:48,296 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:48,296 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:50,383 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:50,405 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10345
2025-04-04 10:34:50,411 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }']}
2025-04-04 10:34:50,411 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:51,074 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:51,135 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:34:51,165 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:51,171 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10507
2025-04-04 10:34:51,172 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }']}
2025-04-04 10:34:51,172 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:52,330 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:52,338 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10507
2025-04-04 10:34:52,339 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }']}
2025-04-04 10:34:52,339 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:54,329 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:54,342 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10507
2025-04-04 10:34:54,343 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }']}
2025-04-04 10:34:54,343 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:56,331 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:56,346 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10507
2025-04-04 10:34:56,347 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }']}
2025-04-04 10:34:56,347 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:56,779 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:56,790 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:34:56,818 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:56,832 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10669
2025-04-04 10:34:56,833 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }']}
2025-04-04 10:34:56,833 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:57,436 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:57,458 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:34:57,489 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:57,514 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10831
2025-04-04 10:34:57,515 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }']}
2025-04-04 10:34:57,515 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:57,998 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:58,021 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:34:58,058 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:58,072 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10993
2025-04-04 10:34:58,073 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }']}
2025-04-04 10:34:58,073 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:58,332 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:58,337 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 10993
2025-04-04 10:34:58,339 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }']}
2025-04-04 10:34:58,341 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:34:58,771 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:58,779 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:34:58,806 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:34:58,830 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:34:58,832 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:34:58,832 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:00,349 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:00,368 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:00,370 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:00,370 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:02,339 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:02,347 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:02,356 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:02,356 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:04,348 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:04,381 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:04,382 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:04,382 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:06,348 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:06,353 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:06,354 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:06,354 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:08,378 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:08,402 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:08,403 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:08,403 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:10,397 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:10,409 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11155
2025-04-04 10:35:10,410 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }']}
2025-04-04 10:35:10,410 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:11,211 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:11,224 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:35:11,266 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:11,278 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:11,280 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:11,280 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:12,451 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:12,457 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:12,459 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:12,459 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:14,468 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:14,482 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:14,483 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:14,484 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:16,487 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:16,535 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:16,536 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:16,536 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:18,705 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:18,720 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:18,721 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:18,721 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:20,608 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:20,619 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:20,620 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:20,624 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:22,686 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:22,691 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:22,692 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:22,692 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:24,677 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:24,703 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:24,704 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:24,704 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:26,678 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:26,681 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:26,682 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:26,682 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:29,022 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:29,025 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:29,027 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:29,028 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:30,756 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:30,762 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:30,762 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:30,763 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:32,848 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:32,851 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:32,852 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:32,852 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:34,877 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:34,881 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:34,882 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:34,882 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:35,849 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:35,859 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:35,860 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:35,860 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:37,438 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:37,450 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:37,456 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:37,456 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:39,709 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:39,719 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:39,726 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:39,727 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:41,233 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:41,303 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:41,324 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:41,324 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:43,575 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:43,592 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:43,593 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:43,593 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:45,339 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:45,342 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:45,343 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:45,343 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:47,355 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:47,358 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:47,359 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:47,359 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:49,352 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:49,366 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:49,367 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:49,368 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:51,369 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:51,380 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:51,381 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:51,381 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:53,617 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:53,621 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:53,622 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:53,622 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:55,666 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:55,693 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:55,694 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:55,694 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:57,661 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:57,671 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:57,672 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:57,672 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:35:59,742 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:35:59,752 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:35:59,753 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:35:59,753 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:01,709 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:01,732 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:01,734 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:01,735 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:03,725 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:03,744 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:03,745 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:03,745 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:05,758 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:05,769 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:05,769 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:05,770 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:07,749 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:07,754 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:07,759 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:07,760 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:09,749 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:09,756 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:09,757 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:09,757 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:11,800 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:11,803 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:11,804 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:11,804 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:13,834 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:13,847 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:13,848 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:13,848 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:15,829 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:15,834 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:15,835 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:15,835 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:17,918 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:17,929 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:17,930 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:17,930 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:19,957 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:19,962 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:19,963 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:19,963 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:22,033 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:22,039 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:22,040 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:22,040 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:24,104 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:24,123 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:24,124 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:24,124 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:26,234 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:26,237 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:26,238 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:26,243 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:28,443 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:28,446 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:28,448 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:28,448 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:30,183 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:30,207 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:36:30,208 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:36:30,208 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:36:32,173 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:32,175 - DEBUG - API response: None
2025-04-04 10:36:34,186 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:34,200 - DEBUG - API response: None
2025-04-04 10:36:36,190 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:36,191 - DEBUG - API response: None
2025-04-04 10:36:38,190 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:38,191 - DEBUG - API response: None
2025-04-04 10:36:40,204 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:40,205 - DEBUG - API response: None
2025-04-04 10:36:42,205 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:42,212 - DEBUG - API response: None
2025-04-04 10:36:44,338 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:44,342 - DEBUG - API response: None
2025-04-04 10:36:46,366 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:46,374 - DEBUG - API response: None
2025-04-04 10:36:48,365 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:48,366 - DEBUG - API response: None
2025-04-04 10:36:50,394 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:50,396 - DEBUG - API response: None
2025-04-04 10:36:52,369 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:52,371 - DEBUG - API response: None
2025-04-04 10:36:54,423 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:54,427 - DEBUG - API response: None
2025-04-04 10:36:56,450 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:56,452 - DEBUG - API response: None
2025-04-04 10:36:58,477 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:36:58,478 - DEBUG - API response: None
2025-04-04 10:37:00,579 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:00,581 - DEBUG - API response: None
2025-04-04 10:37:02,600 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:02,604 - DEBUG - API response: None
2025-04-04 10:37:04,570 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:04,572 - DEBUG - API response: None
2025-04-04 10:37:06,575 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:06,576 - DEBUG - API response: None
2025-04-04 10:37:08,574 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:08,575 - DEBUG - API response: None
2025-04-04 10:37:10,606 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:10,616 - DEBUG - API response: None
2025-04-04 10:37:12,604 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:12,605 - DEBUG - API response: None
2025-04-04 10:37:14,612 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:14,613 - DEBUG - API response: None
2025-04-04 10:37:16,618 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:16,619 - DEBUG - API response: None
2025-04-04 10:37:18,628 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:18,631 - DEBUG - API response: None
2025-04-04 10:37:20,671 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:20,680 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:20,680 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:20,681 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:22,663 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:22,670 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:22,671 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:22,678 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:24,713 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:24,723 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:24,724 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:24,725 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:26,746 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:26,762 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:26,763 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:26,764 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:28,741 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:28,748 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:28,749 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:28,749 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:30,779 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:30,788 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:30,789 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:30,789 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:32,817 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:32,830 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:32,831 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:32,834 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:34,815 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:34,839 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:34,840 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:34,840 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:36,875 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:36,881 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:36,884 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:36,885 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:38,870 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:38,874 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:38,875 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:38,875 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:40,898 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:40,903 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:40,906 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:40,906 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:42,929 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:42,936 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:42,938 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:42,938 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:44,989 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:44,996 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:44,997 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:44,997 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:37:46,959 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:46,961 - DEBUG - API response: None
2025-04-04 10:37:48,959 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:48,964 - DEBUG - API response: None
2025-04-04 10:37:50,990 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:51,006 - DEBUG - API response: None
2025-04-04 10:37:53,030 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:53,043 - DEBUG - API response: None
2025-04-04 10:37:55,024 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:55,026 - DEBUG - API response: None
2025-04-04 10:37:57,062 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:57,067 - DEBUG - API response: None
2025-04-04 10:37:59,098 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:37:59,108 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:37:59,109 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:37:59,109 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:38:01,140 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:01,155 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:38:01,163 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:38:01,164 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:38:03,177 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:03,193 - DEBUG - API response: None
2025-04-04 10:38:05,179 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:05,196 - DEBUG - API response: None
2025-04-04 10:38:07,185 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:07,186 - DEBUG - API response: None
2025-04-04 10:38:09,174 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:09,176 - DEBUG - API response: None
2025-04-04 10:38:11,170 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:11,178 - DEBUG - API response: None
2025-04-04 10:38:13,184 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:13,185 - DEBUG - API response: None
2025-04-04 10:38:15,167 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:15,168 - DEBUG - API response: None
2025-04-04 10:38:17,226 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:17,227 - DEBUG - API response: None
2025-04-04 10:38:19,233 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:19,261 - DEBUG - API response: None
2025-04-04 10:38:21,324 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:21,325 - DEBUG - API response: None
2025-04-04 10:38:23,323 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:23,327 - DEBUG - API response: None
2025-04-04 10:38:25,388 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:25,391 - DEBUG - API response: None
2025-04-04 10:38:27,408 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:27,409 - DEBUG - API response: None
2025-04-04 10:38:29,420 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:29,427 - DEBUG - API response: None
2025-04-04 10:38:31,448 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:31,452 - DEBUG - API response: None
2025-04-04 10:38:33,453 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:33,463 - DEBUG - API response: None
2025-04-04 10:38:35,453 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:35,454 - DEBUG - API response: None
2025-04-04 10:38:37,453 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:37,454 - DEBUG - API response: None
2025-04-04 10:38:39,453 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:39,457 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:38:39,458 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:38:39,458 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:38:41,467 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:41,500 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:38:41,501 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:38:41,501 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:38:43,455 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:43,472 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:38:43,473 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:38:43,473 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:38:45,528 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:45,530 - DEBUG - API response: None
2025-04-04 10:38:47,551 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:47,562 - DEBUG - API response: None
2025-04-04 10:38:49,595 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:49,600 - DEBUG - API response: None
2025-04-04 10:38:51,629 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:51,635 - DEBUG - API response: None
2025-04-04 10:38:53,639 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:53,645 - DEBUG - API response: None
2025-04-04 10:38:55,638 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:55,646 - DEBUG - API response: None
2025-04-04 10:38:57,789 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:57,792 - DEBUG - API response: None
2025-04-04 10:38:59,975 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:38:59,977 - DEBUG - API response: None
2025-04-04 10:39:01,964 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:01,967 - DEBUG - API response: None
2025-04-04 10:39:03,984 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:03,998 - DEBUG - API response: None
2025-04-04 10:39:06,016 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:06,017 - DEBUG - API response: None
2025-04-04 10:39:08,038 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:08,047 - DEBUG - API response: None
2025-04-04 10:39:10,056 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:10,057 - DEBUG - API response: None
2025-04-04 10:39:12,052 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:12,053 - DEBUG - API response: None
2025-04-04 10:39:14,143 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:14,145 - DEBUG - API response: None
2025-04-04 10:39:16,171 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:16,175 - DEBUG - API response: None
2025-04-04 10:39:18,194 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:18,196 - DEBUG - API response: None
2025-04-04 10:39:20,206 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:20,207 - DEBUG - API response: None
2025-04-04 10:39:22,218 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:22,225 - DEBUG - API response: None
2025-04-04 10:39:24,231 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:24,233 - DEBUG - API response: None
2025-04-04 10:39:26,255 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:26,257 - DEBUG - API response: None
2025-04-04 10:39:28,279 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:28,280 - DEBUG - API response: None
2025-04-04 10:39:30,311 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:30,312 - DEBUG - API response: None
2025-04-04 10:39:32,305 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:32,323 - DEBUG - API response: None
2025-04-04 10:39:34,329 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:34,360 - DEBUG - API response: None
2025-04-04 10:39:36,304 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:36,312 - DEBUG - API response: None
2025-04-04 10:39:38,301 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:38,321 - DEBUG - API response: None
2025-04-04 10:39:40,321 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:40,323 - DEBUG - API response: None
2025-04-04 10:39:42,343 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:42,344 - DEBUG - API response: None
2025-04-04 10:39:44,374 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:44,383 - DEBUG - API response: None
2025-04-04 10:39:46,445 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:46,447 - DEBUG - API response: None
2025-04-04 10:39:48,445 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:48,447 - DEBUG - API response: None
2025-04-04 10:39:50,483 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:50,484 - DEBUG - API response: None
2025-04-04 10:39:52,514 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:52,515 - DEBUG - API response: None
2025-04-04 10:39:54,525 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:54,535 - DEBUG - API response: None
2025-04-04 10:39:56,689 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:56,691 - DEBUG - API response: None
2025-04-04 10:39:58,509 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:39:58,517 - DEBUG - API response: None
2025-04-04 10:40:00,520 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:00,549 - DEBUG - API response: None
2025-04-04 10:40:00,688 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:00,697 - DEBUG - API response: None
2025-04-04 10:40:02,650 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:02,652 - DEBUG - API response: None
2025-04-04 10:40:04,648 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:04,656 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:04,657 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:04,657 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:06,707 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:06,726 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:06,727 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:06,728 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:08,771 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:08,803 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:08,804 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:08,805 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:11,056 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:11,066 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:11,066 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:11,067 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:12,792 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:12,796 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:12,796 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:12,797 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:14,953 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:14,958 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:14,959 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:14,960 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:16,825 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:16,846 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:16,847 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:16,847 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:18,972 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:19,000 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:19,002 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:19,003 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:21,042 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:21,047 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:21,047 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:21,048 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:23,075 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:23,088 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:23,090 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:23,091 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:25,175 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:25,179 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:25,180 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:25,180 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:27,074 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:27,087 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:40:27,091 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:40:27,091 - ERROR - Exception on /get_messages [GET]
Traceback (most recent call last):
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/anime-watcher/.venv/lib/python3.10/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/anime-watcher/frontend/app.py", line 122, in get_messages
    msg['user_name'] = get_username(msg['user_id'])
TypeError: string indices must be integers
2025-04-04 10:40:29,081 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:29,082 - DEBUG - API response: None
2025-04-04 10:40:31,079 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:31,083 - DEBUG - API response: None
2025-04-04 10:40:33,108 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:33,115 - DEBUG - API response: None
2025-04-04 10:40:35,150 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:35,151 - DEBUG - API response: None
2025-04-04 10:40:37,183 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:37,184 - DEBUG - API response: None
2025-04-04 10:40:39,422 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:39,424 - DEBUG - API response: None
2025-04-04 10:40:41,495 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:41,497 - DEBUG - API response: None
2025-04-04 10:40:43,597 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:43,599 - DEBUG - API response: None
2025-04-04 10:40:45,693 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:45,695 - DEBUG - API response: None
2025-04-04 10:40:47,794 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:47,795 - DEBUG - API response: None
2025-04-04 10:40:49,911 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:49,913 - DEBUG - API response: None
2025-04-04 10:40:52,040 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:52,044 - DEBUG - API response: None
2025-04-04 10:40:54,169 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:54,172 - DEBUG - API response: None
2025-04-04 10:40:56,219 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:56,220 - DEBUG - API response: None
2025-04-04 10:40:58,353 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:40:58,369 - DEBUG - API response: None
2025-04-04 10:41:00,430 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:00,435 - DEBUG - API response: None
2025-04-04 10:41:02,529 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:02,530 - DEBUG - API response: None
2025-04-04 10:41:04,643 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:04,646 - DEBUG - API response: None
2025-04-04 10:41:06,688 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:06,689 - DEBUG - API response: None
2025-04-04 10:41:08,708 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:08,709 - DEBUG - API response: None
2025-04-04 10:41:10,738 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:10,748 - DEBUG - API response: None
2025-04-04 10:41:12,773 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:12,774 - DEBUG - API response: None
2025-04-04 10:41:14,794 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:14,795 - DEBUG - API response: None
2025-04-04 10:41:16,813 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:16,814 - DEBUG - API response: None
2025-04-04 10:41:18,837 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:18,838 - DEBUG - API response: None
2025-04-04 10:41:20,992 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:20,994 - DEBUG - API response: None
2025-04-04 10:41:22,910 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:22,911 - DEBUG - API response: None
2025-04-04 10:41:24,094 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:24,096 - DEBUG - API response: None
2025-04-04 10:41:25,903 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:25,905 - DEBUG - API response: None
2025-04-04 10:41:27,949 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:27,975 - DEBUG - http://localhost:8080 "GET /chat/messages?after=0 HTTP/1.1" 200 11319
2025-04-04 10:41:27,976 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ee696820cdfb1d430685b3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hi", "timestamp_ms" : 1743677800754 }', '{ "_id" : { "$oid" : "67ee6b6aaea36e60ae006cb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743678314184 }', '{ "_id" : { "$oid" : "67ee6becaea36e60ae006cb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "  ", "timestamp_ms" : 1743678444104 }', '{ "_id" : { "$oid" : "67ee6bf0aea36e60ae006cb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678448389 }', '{ "_id" : { "$oid" : "67ee6bf5aea36e60ae006cb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743678453066 }', '{ "_id" : { "$oid" : "67ee6c25aea36e60ae006cb7" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743678501225 }', '{ "_id" : { "$oid" : "67ee6c2eaea36e60ae006cb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678510038 }', '{ "_id" : { "$oid" : "67ee6c38aea36e60ae006cb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678520342 }', '{ "_id" : { "$oid" : "67ee6c46aea36e60ae006cba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678534368 }', '{ "_id" : { "$oid" : "67ee6c47aea36e60ae006cbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678535846 }', '{ "_id" : { "$oid" : "67ee6c48aea36e60ae006cbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678536864 }', '{ "_id" : { "$oid" : "67ee6c4aaea36e60ae006cbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678538091 }', '{ "_id" : { "$oid" : "67ee6c4baea36e60ae006cbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678539294 }', '{ "_id" : { "$oid" : "67ee6c4eaea36e60ae006cbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743678542070 }', '{ "_id" : { "$oid" : "67ee81001018d354b706b0a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgkljfkl", "timestamp_ms" : 1743683840838 }', '{ "_id" : { "$oid" : "67ee81041018d354b706b0a4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "f;ldsikp", "timestamp_ms" : 1743683844898 }', '{ "_id" : { "$oid" : "67ee810a1018d354b706b0a5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743683850359 }', '{ "_id" : { "$oid" : "67ee8357844825d2f60eadc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "uigf", "timestamp_ms" : 1743684439647 }', '{ "_id" : { "$oid" : "67ee836a844825d2f60eadc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "rtrtrt", "timestamp_ms" : 1743684458664 }', '{ "_id" : { "$oid" : "67ee83eb844825d2f60eadc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hjklgl", "timestamp_ms" : 1743684587553 }', '{ "_id" : { "$oid" : "67ee841d844825d2f60eadc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743684637229 }', '{ "_id" : { "$oid" : "67ee8551844825d2f60eadc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfklu", "timestamp_ms" : 1743684945151 }', '{ "_id" : { "$oid" : "67ee85db844825d2f60eadc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "jfkldf", "timestamp_ms" : 1743685083798 }', '{ "_id" : { "$oid" : "67ee8680a07fa96cf800a503" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "hello", "timestamp_ms" : 1743685248587 }', '{ "_id" : { "$oid" : "67ee8687a07fa96cf800a504" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "12312", "timestamp_ms" : 1743685255732 }', '{ "_id" : { "$oid" : "67ee8767f3a542466a06c6a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ?", "timestamp_ms" : 1743685479692 }', '{ "_id" : { "$oid" : "67ee87d7ec38842ac10469a3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743685591968 }', '{ "_id" : { "$oid" : "67ee886f2b790bbfce0acb23" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "g,.jkflkgjd", "timestamp_ms" : 1743685743122 }', '{ "_id" : { "$oid" : "67ee88702b790bbfce0acb24" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gfdgdfg", "timestamp_ms" : 1743685744937 }', '{ "_id" : { "$oid" : "67ee88722b790bbfce0acb25" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gdfgdfgdf", "timestamp_ms" : 1743685746953 }', '{ "_id" : { "$oid" : "67ee8b1b22b6ad824e06abb3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fglkjudflg", "timestamp_ms" : 1743686427377 }', '{ "_id" : { "$oid" : "67ee8b6d22b6ad824e06abb4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "m,hfgfd", "timestamp_ms" : 1743686509595 }', '{ "_id" : { "$oid" : "67ee8b6e22b6ad824e06abb5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "gl;kdfl;gkd", "timestamp_ms" : 1743686510391 }', '{ "_id" : { "$oid" : "67ee8b7322b6ad824e06abb6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : " ", "timestamp_ms" : 1743686515739 }', '{ "_id" : { "$oid" : "67ee8b7522b6ad824e06abb7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686517764 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520023 }', '{ "_id" : { "$oid" : "67ee8b7822b6ad824e06abb9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686520794 }', '{ "_id" : { "$oid" : "67ee8b7922b6ad824e06abba" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686521807 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522191 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522198 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522531 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbe" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522755 }', '{ "_id" : { "$oid" : "67ee8b7a22b6ad824e06abbf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686522967 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523128 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc1" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523311 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc2" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523440 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc3" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523464 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc4" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523547 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc5" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523619 }', '{ "_id" : { "$oid" : "67ee8b7b22b6ad824e06abc6" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686523872 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc7" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524477 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc8" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524644 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abc9" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524660 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abca" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524835 }', '{ "_id" : { "$oid" : "67ee8b7c22b6ad824e06abcb" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686524932 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcc" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525101 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcd" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525347 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abce" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525642 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abcf" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525702 }', '{ "_id" : { "$oid" : "67ee8b7d22b6ad824e06abd0" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743686525967 }', '{ "_id" : { "$oid" : "67eec9296f1a4d44e109f263" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702313798 }', '{ "_id" : { "$oid" : "67eecb3b6f1a4d44e109f264" }, "user_id" : "67ee657f2cbbf03f420f18e3", "message" : "", "timestamp_ms" : 1743702843529 }', '{ "_id" : { "$oid" : "67ef8b9b78f8d183680fe723" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752091073 }', '{ "_id" : { "$oid" : "67ef8ba078f8d183680fe724" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752096778 }', '{ "_id" : { "$oid" : "67ef8ba178f8d183680fe725" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097434 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe726" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752097997 }', '{ "_id" : { "$oid" : "67ef8ba278f8d183680fe727" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752098770 }', '{ "_id" : { "$oid" : "67ef8baf78f8d183680fe728" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "fgdjkl", "timestamp_ms" : 1743752111210 }']}
2025-04-04 10:41:30,404 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:30,408 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752111210 HTTP/1.1" 200 30
2025-04-04 10:41:30,408 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:41:31,894 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:31,896 - DEBUG - API response: None
2025-04-04 10:41:34,014 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:34,016 - DEBUG - API response: None
2025-04-04 10:41:36,023 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:36,025 - DEBUG - API response: None
2025-04-04 10:41:38,035 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:38,043 - DEBUG - API response: None
2025-04-04 10:41:40,098 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:40,099 - DEBUG - API response: None
2025-04-04 10:41:42,110 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:42,111 - DEBUG - API response: None
2025-04-04 10:41:44,120 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:44,122 - DEBUG - API response: None
2025-04-04 10:41:46,147 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:46,148 - DEBUG - API response: None
2025-04-04 10:41:48,166 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:48,167 - DEBUG - API response: None
2025-04-04 10:41:50,186 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:50,188 - DEBUG - API response: None
2025-04-04 10:41:52,209 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:52,229 - DEBUG - API response: None
2025-04-04 10:41:54,252 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:54,254 - DEBUG - API response: None
2025-04-04 10:41:56,274 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:56,292 - DEBUG - API response: None
2025-04-04 10:41:58,278 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:41:58,282 - DEBUG - API response: None
2025-04-04 10:42:00,506 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:00,508 - DEBUG - API response: None
2025-04-04 10:42:02,544 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:02,547 - DEBUG - API response: None
2025-04-04 10:42:04,569 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:04,587 - DEBUG - API response: None
2025-04-04 10:42:06,680 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:06,690 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752111210 HTTP/1.1" 200 30
2025-04-04 10:42:06,691 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:08,712 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:08,724 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752111210 HTTP/1.1" 200 30
2025-04-04 10:42:08,724 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:10,724 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:10,755 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752111210 HTTP/1.1" 200 30
2025-04-04 10:42:10,756 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:11,705 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:11,743 - DEBUG - http://localhost:8080 "POST /chat/send HTTP/1.1" 200 16
2025-04-04 10:42:11,790 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:11,799 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752111210 HTTP/1.1" 200 191
2025-04-04 10:42:11,803 - DEBUG - API response: {'success': True, 'messages': ['{ "_id" : { "$oid" : "67ef8d5318c445153c097363" }, "user_id" : "67ee6639aafdf32ddc06f8a3", "message" : "", "timestamp_ms" : 1743752531704 }']}
2025-04-04 10:42:12,830 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:12,841 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:42:12,842 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:14,924 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:14,930 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:42:14,930 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:16,935 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:16,950 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:42:16,951 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:18,950 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:18,965 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:42:18,966 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:42:20,928 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:20,929 - DEBUG - API response: None
2025-04-04 10:42:22,983 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:22,985 - DEBUG - API response: None
2025-04-04 10:42:25,044 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:25,046 - DEBUG - API response: None
2025-04-04 10:42:27,041 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:27,042 - DEBUG - API response: None
2025-04-04 10:42:29,036 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:29,038 - DEBUG - API response: None
2025-04-04 10:42:31,057 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:31,059 - DEBUG - API response: None
2025-04-04 10:42:33,057 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:33,065 - DEBUG - API response: None
2025-04-04 10:42:35,081 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:35,083 - DEBUG - API response: None
2025-04-04 10:42:37,170 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:37,172 - DEBUG - API response: None
2025-04-04 10:42:39,185 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:39,186 - DEBUG - API response: None
2025-04-04 10:42:41,191 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:41,194 - DEBUG - API response: None
2025-04-04 10:42:43,190 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:43,192 - DEBUG - API response: None
2025-04-04 10:42:45,192 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:45,193 - DEBUG - API response: None
2025-04-04 10:42:47,227 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:47,228 - DEBUG - API response: None
2025-04-04 10:42:49,233 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:49,235 - DEBUG - API response: None
2025-04-04 10:42:51,248 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:51,249 - DEBUG - API response: None
2025-04-04 10:42:53,266 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:53,267 - DEBUG - API response: None
2025-04-04 10:42:55,303 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:55,310 - DEBUG - API response: None
2025-04-04 10:42:57,333 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:57,335 - DEBUG - API response: None
2025-04-04 10:42:59,339 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:42:59,342 - DEBUG - API response: None
2025-04-04 10:43:01,384 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:01,386 - DEBUG - API response: None
2025-04-04 10:43:03,404 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:03,405 - DEBUG - API response: None
2025-04-04 10:43:05,427 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:05,430 - DEBUG - API response: None
2025-04-04 10:43:07,426 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:07,427 - DEBUG - API response: None
2025-04-04 10:43:09,461 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:09,463 - DEBUG - API response: None
2025-04-04 10:43:11,521 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:11,529 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:11,531 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:13,585 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:13,596 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:13,596 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:15,594 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:15,598 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:15,599 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:17,640 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:17,658 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:17,658 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:19,680 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:19,696 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:19,697 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:21,733 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:21,736 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:21,737 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:23,755 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:23,759 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:23,760 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:25,801 - DEBUG - Starting new HTTP connection (1): localhost:8080
2025-04-04 10:43:25,819 - DEBUG - http://localhost:8080 "GET /chat/messages?after=1743752531704 HTTP/1.1" 200 30
2025-04-04 10:43:25,820 - DEBUG - API response: {'success': True, 'messages': []}
2025-04-04 10:43:27,285 - DEBUG - Starting new HTTP connection (1): localhost:8080
