{% extends "base.html" %}

{% block content %}
<h1>Search Anime</h1>
<input type="text" id="search-bar" placeholder="Type to search..." onkeyup="searchAnime()">

<div id="anime-results"></div>

<script>
    function searchAnime() {
        let query = document.getElementById('search-bar').value;

        fetch(`/search_anime?q=${query}`)
            .then(response => response.json())
            .then(animeList => {
                let resultsDiv = document.getElementById('anime-results');
                resultsDiv.innerHTML = '';  // Clear previous results

                animeList.forEach(anime => {
                    let animeCard = `
                        <div class="anime-card">
                            <img src="${anime.image_url}" alt="${anime.title}">
                            <h3>${anime}</h3>
                            <p>${anime.description}</p>
                        </div>
                    `;
                    resultsDiv.innerHTML += animeCard;
                });
            })
            .catch(error => console.error("Error fetching anime:", error));
    }
</script>

<style>
    #search-bar {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        font-size: 16px;
    }

    #anime-results {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .anime-card {
        border: 1px solid #ccc;
        padding: 10px;
        width: 200px;
        text-align: center;
    }

    img {
        max-width: 100%;
        height: auto;
    }
</style>
{% endblock %}