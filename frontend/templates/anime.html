{% extends "base.html" %}

{% block title %}{{ anime.title }}{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
<div class="anime-container">
    <h1>{{ anime.title }}</h1>
    <img src="{{ anime.image_url }}" alt="{{ anime.title }}" style="max-width:300px;" />
    <p>{{ anime.description }}</p>
    <p>Episodes: {{ anime.episodes }}</p>
    {% if 'user_id' in session %}
    <button onclick="addFavourite()">Add Favourite</button>
    {% endif %}
</div>

<script>
    function addFavourite() {
        const animeId = "{{ anime.id }}";
        console.log(animeId)
        fetch('/add_favourite', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(animeId)
        }).then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Added to favourites!");
                } else {
                    alert("Error adding favourite");
                }
            });
    };
</script>
{% endblock %}